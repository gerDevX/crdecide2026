---
---

<div id="age-gate-modal" class="hidden">
  <div class="modal-backdrop" id="age-gate-backdrop"></div>
  <div class="modal-content text-center" role="dialog" aria-modal="true" aria-labelledby="age-gate-title">
    <div class="mb-6">
      <div class="w-16 h-16 bg-civic-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <span class="text-3xl">üó≥Ô∏è</span>
      </div>
      <h2 id="age-gate-title" class="text-2xl font-bold text-slate-900 mb-2">
        Bienvenido a Costa Rica Decide
      </h2>
      <p class="text-slate-600">
        Para mostrarte la mejor experiencia, selecciona tu rango de edad:
      </p>
    </div>

    <div class="space-y-3">
      <button
        data-age="18-35"
        class="age-gate-btn w-full py-4 px-6 bg-white border-2 border-slate-200 rounded-xl text-left hover:border-civic-500 hover:bg-civic-50 transition-all group"
      >
        <span class="font-semibold text-slate-900 group-hover:text-civic-600">18-35 a√±os</span>
        <span class="block text-sm text-slate-500 mt-1">Vista r√°pida y visual</span>
      </button>

      <button
        data-age="36-49"
        class="age-gate-btn w-full py-4 px-6 bg-white border-2 border-slate-200 rounded-xl text-left hover:border-civic-500 hover:bg-civic-50 transition-all group"
      >
        <span class="font-semibold text-slate-900 group-hover:text-civic-600">36-49 a√±os</span>
        <span class="block text-sm text-slate-500 mt-1">Resumen con detalle expandible</span>
      </button>

      <button
        data-age="50+"
        class="age-gate-btn w-full py-4 px-6 bg-white border-2 border-slate-200 rounded-xl text-left hover:border-civic-500 hover:bg-civic-50 transition-all group"
      >
        <span class="font-semibold text-slate-900 group-hover:text-civic-600">50+ a√±os</span>
        <span class="block text-sm text-slate-500 mt-1">Lectura clara y completa</span>
      </button>
    </div>

    <p class="mt-6 text-xs text-slate-400">
      Puedes cambiar esto en cualquier momento desde el men√∫
    </p>
  </div>
</div>

<script>
  const modal = document.getElementById('age-gate-modal');
  const buttons = document.querySelectorAll('.age-gate-btn');

  // Check if age group is stored
  const stored = localStorage.getItem('costarica-decide-age-group');
  
  if (!stored && modal) {
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const age = (e.currentTarget as HTMLElement).dataset.age;
      if (age) {
        localStorage.setItem('costarica-decide-age-group', age);
        document.documentElement.setAttribute('data-age-group', age);
        modal?.classList.add('hidden');
        document.body.style.overflow = '';
        window.location.reload();
      }
    });
  });
</script>

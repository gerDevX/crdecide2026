---
---

<div id="mode-selector-modal" class="hidden">
  <div class="modal-backdrop" id="mode-selector-backdrop"></div>
  <div class="modal-content p-6" role="dialog" aria-modal="true" aria-labelledby="mode-selector-title">
    
    <!-- Header -->
    <div class="text-center mb-6">
      <h2 id="mode-selector-title" class="text-3xl font-bold text-slate-900 mb-3">
        ğŸ‡¨ğŸ‡· Â¡Costa Rica Decide!
      </h2>
      <div class="flex items-center justify-center gap-2">
        <p class="text-lg text-slate-600">Â¿En cuÃ¡l rango estÃ¡ tu edad?</p>
        <button 
          id="info-tooltip-btn"
          class="w-6 h-6 bg-slate-200 hover:bg-slate-300 rounded-full flex items-center justify-center text-slate-500 hover:text-slate-700 transition-colors text-sm font-bold"
          aria-label="Â¿Por quÃ© preguntamos esto?"
        >?</button>
      </div>
      
      <!-- Tooltip -->
      <div id="info-tooltip" class="hidden mt-3 bg-slate-800 text-white text-sm rounded-lg p-3 text-left max-w-sm mx-auto">
        <p class="font-medium mb-1">ğŸ’¡ Â¿Por quÃ© preguntamos?</p>
        <p class="text-slate-300 text-xs">
          Adaptamos la experiencia segÃºn tu necesidad. 
          Esto <strong class="text-white">no afecta el contenido</strong>, solo cÃ³mo lo ves.
        </p>
      </div>
    </div>

    <!-- Age Options -->
    <div class="space-y-4">
      
      <!-- 18-35 -->
      <button
        data-age="18-35"
        data-mode="express"
        class="age-option group"
      >
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform">
            <span class="text-2xl">ğŸš€</span>
          </div>
          <div class="flex-1 text-left">
            <div class="flex items-center gap-2">
              <span class="text-lg font-bold text-slate-900 group-hover:text-civic-600">18-35 aÃ±os</span>
              <span class="text-xs bg-cyan-100 text-cyan-700 px-2 py-0.5 rounded-full font-medium">Express</span>
            </div>
            <p class="text-sm text-slate-500 mt-1">
              <strong class="text-slate-700">RÃ¡pido y visual</strong> â€” Interfaz tÃ¡ctil optimizada para mÃ³vil, 
              desliza entre candidatos como en redes sociales.
            </p>
          </div>
          <svg class="w-5 h-5 text-slate-300 group-hover:text-civic-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
        <div class="mt-3 pt-3 border-t border-slate-100">
          <div class="flex items-center gap-4 text-xs text-slate-400">
            <span class="flex items-center gap-1">âœ¨ Animaciones</span>
            <span class="flex items-center gap-1">ğŸ“± MÃ³vil primero</span>
            <span class="flex items-center gap-1">ğŸ‘† Gestos tÃ¡ctiles</span>
          </div>
        </div>
      </button>

      <!-- 36-49 -->
      <button
        data-age="36-49"
        data-mode="dashboard"
        class="age-option group"
      >
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 bg-gradient-to-br from-slate-600 to-slate-800 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform">
            <span class="text-2xl">ğŸ“Š</span>
          </div>
          <div class="flex-1 text-left">
            <div class="flex items-center gap-2">
              <span class="text-lg font-bold text-slate-900 group-hover:text-civic-600">36-49 aÃ±os</span>
              <span class="text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-medium">Dashboard</span>
            </div>
            <p class="text-sm text-slate-500 mt-1">
              <strong class="text-slate-700">Completo y detallado</strong> â€” Tablas comparativas, 
              rankings, filtros y toda la informaciÃ³n a un vistazo.
            </p>
          </div>
          <svg class="w-5 h-5 text-slate-300 group-hover:text-civic-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
        <div class="mt-3 pt-3 border-t border-slate-100">
          <div class="flex items-center gap-4 text-xs text-slate-400">
            <span class="flex items-center gap-1">ğŸ“‹ Tablas</span>
            <span class="flex items-center gap-1">ğŸ” Filtros</span>
            <span class="flex items-center gap-1">ğŸ“ˆ GrÃ¡ficos</span>
          </div>
        </div>
      </button>

      <!-- 50+ -->
      <button
        data-age="50+"
        data-mode="reading"
        class="age-option group"
      >
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform">
            <span class="text-2xl">ğŸ“–</span>
          </div>
          <div class="flex-1 text-left">
            <div class="flex items-center gap-2">
              <span class="text-lg font-bold text-slate-900 group-hover:text-civic-600">50+ aÃ±os</span>
              <span class="text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-medium">Lectura</span>
            </div>
            <p class="text-sm text-slate-500 mt-1">
              <strong class="text-slate-700">Claro y cÃ³modo</strong> â€” Texto grande, fondo suave para la vista, 
              sin animaciones que distraigan.
            </p>
          </div>
          <svg class="w-5 h-5 text-slate-300 group-hover:text-civic-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
        <div class="mt-3 pt-3 border-t border-slate-100">
          <div class="flex items-center gap-4 text-xs text-slate-400">
            <span class="flex items-center gap-1">ğŸ”  Texto grande</span>
            <span class="flex items-center gap-1">ğŸŒ… Fondo cÃ¡lido</span>
            <span class="flex items-center gap-1">ğŸ§˜ Sin distracciones</span>
          </div>
        </div>
      </button>

    </div>

    <!-- Footer -->
    <div class="mt-6 pt-4 border-t border-slate-100">
      <p class="text-center text-xs text-slate-400">
        ğŸ”„ Puedes cambiar esto en cualquier momento desde el menÃº superior
      </p>
    </div>

    <!-- Privacy note -->
    <div class="mt-4 text-center">
      <p class="text-xs text-slate-300">
        ğŸ”’ Esta preferencia se guarda solo en tu dispositivo. No recolectamos datos personales.
      </p>
    </div>
  </div>
</div>

<script>
  const modal = document.getElementById('mode-selector-modal');
  const buttons = document.querySelectorAll('.age-option');
  const tooltipBtn = document.getElementById('info-tooltip-btn');
  const tooltip = document.getElementById('info-tooltip');

  // Check if mode is stored
  const storedMode = localStorage.getItem('costarica-decide-mode');
  const storedAge = localStorage.getItem('costarica-decide-age-group');
  
  if (!storedMode && !storedAge && modal) {
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  // Tooltip toggle
  tooltipBtn?.addEventListener('click', (e) => {
    e.stopPropagation();
    tooltip?.classList.toggle('hidden');
  });

  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const target = e.currentTarget as HTMLElement;
      const age = target.dataset.age;
      const mode = target.dataset.mode;
      
      if (age && mode) {
        // Set age group
        localStorage.setItem('costarica-decide-age-group', age);
        document.documentElement.setAttribute('data-age-group', age);
        
        // Set mode
        localStorage.setItem('costarica-decide-mode', mode);
        document.documentElement.setAttribute('data-mode', mode);
        
        // Close modal
        modal?.classList.add('hidden');
        document.body.style.overflow = '';
        
        // Reload to apply changes
        window.location.reload();
      }
    });
  });
</script>

<style>
  .age-option {
    width: 100%;
    padding: 1rem;
    border-radius: 1rem;
    border: 2px solid #e2e8f0;
    transition: all 0.2s;
    cursor: pointer;
    background: white;
  }
  
  .age-option:hover {
    border-color: #38bdf8;
    background: rgba(224, 242, 254, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
  }
  
  .age-option:focus {
    outline: none;
    box-shadow: 0 0 0 2px white, 0 0 0 4px #0ea5e9;
  }
  
  .bg-gradient-ocean {
    background: linear-gradient(135deg, #0284c7 0%, #06b6d4 100%);
  }
  
  .modal-content {
    max-height: 95vh;
    overflow-y: auto;
  }
  
  @media (max-width: 640px) {
    .modal-content {
      margin: 0.5rem;
      max-height: 98vh;
    }
    
    .age-option {
      padding: 0.875rem;
    }
  }
</style>

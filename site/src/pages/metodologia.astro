---
import BaseLayout from '../layouts/BaseLayout.astro';
import { pillars, getFiscalStats } from '../lib/data';

const fiscalStats = getFiscalStats();
---

<BaseLayout title="Metodolog√≠a">
  <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 prose prose-slate prose-lg">
    
    <h1 class="flex items-center gap-3">
      <span>üìã</span> ¬øC√≥mo funciona Costa Rica Decide?
    </h1>

    <h2>¬øQu√© es esto?</h2>
    
    <div class="not-prose bg-gradient-to-r from-civic-50 to-blue-50 border border-civic-200 rounded-xl p-6 mt-4">
      <p class="text-lg text-slate-700 mb-4">
        <strong class="text-civic-800">Costa Rica Decide</strong> es una herramienta ciudadana que te ayuda a entender 
        qu√© proponen los candidatos presidenciales para el per√≠odo <strong>2026-2030</strong>.
      </p>
      <div class="flex items-center gap-3 bg-amber-50 border border-amber-200 rounded-lg px-4 py-3">
        <span class="text-2xl">üó≥Ô∏è</span>
        <p class="text-amber-900 font-medium">
          <strong>No te decimos por qui√©n votar.</strong> Solo organizamos la informaci√≥n de los 
          planes de gobierno oficiales para que puedas compararlos f√°cilmente.
        </p>
      </div>
    </div>

    <hr />

    <h2>¬øDe d√≥nde salen los datos?</h2>
    
    <div class="not-prose bg-blue-50 border border-blue-200 rounded-xl p-6 mt-4">
      <div class="flex items-start gap-4">
        <span class="text-4xl">üìÑ</span>
        <div>
          <p class="text-lg text-slate-700 mb-2">
            Todos los datos provienen de los <strong class="text-blue-800">planes de gobierno oficiales</strong> 
            presentados por cada partido pol√≠tico al <strong>Tribunal Supremo de Elecciones (TSE)</strong>.
          </p>
          <p class="text-slate-600">
            Estos documentos son p√∫blicos y los puedes descargar directamente desde este sitio con enlace al TSE.
          </p>
        </div>
      </div>
    </div>

    <hr />

    <h2>¬øQu√© son los pilares?</h2>
    <p>
      Organizamos las propuestas en <strong>10 √°reas tem√°ticas</strong> fundamentales para el pa√≠s.
      Los pesos reflejan las <strong>urgencias actuales de Costa Rica</strong> seg√∫n fuentes oficiales 
      y estudios p√∫blicos de instituciones nacionales e internacionales:
    </p>

    <div class="not-prose overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead>
          <tr class="border-b bg-slate-50">
            <th class="text-left py-3 px-3">#</th>
            <th class="text-left py-3 px-3">Pilar</th>
            <th class="text-left py-3 px-3">¬øDe qu√© trata?</th>
            <th class="text-right py-3 px-3">Peso</th>
            <th class="text-center py-3 px-3">Fuentes</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b bg-red-50">
            <td class="py-2 px-3 font-bold text-red-600">1¬∞</td>
            <td class="py-2 px-3 font-medium">üõ°Ô∏è P3. Seguridad ciudadana</td>
            <td class="py-2 px-3">Polic√≠a, crimen organizado, narcotr√°fico, justicia</td>
            <td class="py-2 px-3 text-right font-bold text-red-600">18%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="seguridad">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b bg-pink-50">
            <td class="py-2 px-3 font-bold text-pink-600">2¬∞</td>
            <td class="py-2 px-3 font-medium">üè• P4. Salud p√∫blica (CCSS)</td>
            <td class="py-2 px-3">Hospitales, listas de espera, pensiones</td>
            <td class="py-2 px-3 text-right font-bold text-pink-600">16%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="salud">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b bg-emerald-50">
            <td class="py-2 px-3 font-bold text-emerald-600">3¬∞</td>
            <td class="py-2 px-3 font-medium">üí∞ P1. Sostenibilidad fiscal</td>
            <td class="py-2 px-3">Regla fiscal, deuda, gasto p√∫blico</td>
            <td class="py-2 px-3 text-right font-bold text-emerald-600">14%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="fiscal">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b bg-purple-50">
            <td class="py-2 px-3 font-bold text-purple-600">4¬∞</td>
            <td class="py-2 px-3 font-medium">‚öñÔ∏è P7. Reforma del Estado</td>
            <td class="py-2 px-3">Corrupci√≥n, eficiencia, transparencia</td>
            <td class="py-2 px-3 text-right font-bold text-purple-600">12%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="estado">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="py-2 px-3">5¬∞</td>
            <td class="py-2 px-3 font-medium">üíº P2. Empleo e IED</td>
            <td class="py-2 px-3">Inversi√≥n extranjera, zonas francas, empleo</td>
            <td class="py-2 px-3 text-right">11%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="empleo">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="py-2 px-3">6¬∞</td>
            <td class="py-2 px-3 font-medium">üìö P5. Educaci√≥n</td>
            <td class="py-2 px-3">Calidad educativa, deserci√≥n, universidades</td>
            <td class="py-2 px-3 text-right">10%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="educacion">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="py-2 px-3">7¬∞</td>
            <td class="py-2 px-3 font-medium">üèóÔ∏è P10. Infraestructura</td>
            <td class="py-2 px-3">Carreteras, puertos, APP, obra p√∫blica</td>
            <td class="py-2 px-3 text-right">9%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="infraestructura">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="py-2 px-3">8¬∞</td>
            <td class="py-2 px-3 font-medium">ü§ù P8. Pol√≠tica social</td>
            <td class="py-2 px-3">Pobreza, vulnerabilidad, subsidios focalizados</td>
            <td class="py-2 px-3 text-right">5%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="social">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr class="border-b">
            <td class="py-2 px-3">9¬∞</td>
            <td class="py-2 px-3 font-medium">üåø P6. Ambiente</td>
            <td class="py-2 px-3">Cambio clim√°tico, conservaci√≥n</td>
            <td class="py-2 px-3 text-right">3%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="ambiente">
                üìé Ver
              </button>
            </td>
          </tr>
          <tr>
            <td class="py-2 px-3">10¬∞</td>
            <td class="py-2 px-3 font-medium">üåé P9. Pol√≠tica exterior</td>
            <td class="py-2 px-3">Comercio internacional, diplomacia</td>
            <td class="py-2 px-3 text-right">2%</td>
            <td class="py-2 px-3 text-center">
              <button class="source-btn px-2 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-xs font-medium transition-colors" data-pillar="exterior">
                üìé Ver
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Modal de fuentes -->
    <div id="sources-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50 p-4">
      <div class="bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[80vh] overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b border-slate-200">
          <h3 id="modal-title" class="text-lg font-bold text-slate-900">Fuentes p√∫blicas</h3>
          <button id="close-modal" class="p-2 hover:bg-slate-100 rounded-lg transition-colors">
            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div id="modal-content" class="p-4 overflow-y-auto max-h-[60vh]">
          <!-- Contenido din√°mico -->
        </div>
        <div class="p-4 border-t border-slate-200 bg-slate-50">
          <p class="text-xs text-slate-500 text-center">
            Todas las fuentes son de acceso p√∫blico y verificables
          </p>
        </div>
      </div>
    </div>

    <p class="text-sm text-slate-600 mt-4">
      Los <strong>pilares prioritarios</strong> (P3, P4, P1, P7) suman el <strong>60%</strong> del peso total 
      porque representan las urgencias m√°s cr√≠ticas de Costa Rica en 2026.
    </p>

    <hr />

    <h2>¬øC√≥mo evaluamos cada propuesta?</h2>
    <p>
      Para cada propuesta que encontramos, respondemos <strong>4 preguntas simples</strong>:
    </p>

    <div class="not-prose grid gap-4 mt-6">
      <!-- Dimensi√≥n 1: Existencia -->
      <div class="bg-gradient-to-r from-blue-50 to-slate-50 border border-blue-200 rounded-xl p-5">
        <div class="flex items-center gap-3 mb-3">
          <span class="flex items-center justify-center w-10 h-10 bg-blue-100 text-blue-700 rounded-full font-bold text-lg">1</span>
          <div>
            <h4 class="font-bold text-blue-900 text-lg">¬øExiste la propuesta?</h4>
            <span class="text-sm text-blue-600 font-medium">Dimensi√≥n: Existencia</span>
          </div>
        </div>
        <p class="text-slate-600 mb-3">¬øEl plan menciona una acci√≥n concreta, no solo un deseo vago?</p>
        <div class="grid gap-2">
          <div class="flex items-start gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-2">
            <span class="text-green-600 font-bold">‚úì</span>
            <span class="text-green-800 text-sm">"Crearemos un programa de becas para estudiantes de zonas rurales"</span>
          </div>
          <div class="flex items-start gap-2 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
            <span class="text-red-600 font-bold">‚úó</span>
            <span class="text-red-800 text-sm">"Mejoraremos la educaci√≥n"</span>
          </div>
        </div>
      </div>

      <!-- Dimensi√≥n 2: Plazo -->
      <div class="bg-gradient-to-r from-amber-50 to-slate-50 border border-amber-200 rounded-xl p-5">
        <div class="flex items-center gap-3 mb-3">
          <span class="flex items-center justify-center w-10 h-10 bg-amber-100 text-amber-700 rounded-full font-bold text-lg">2</span>
          <div>
            <h4 class="font-bold text-amber-900 text-lg">¬øDice cu√°ndo?</h4>
            <span class="text-sm text-amber-600 font-medium">Dimensi√≥n: Plazo</span>
          </div>
        </div>
        <p class="text-slate-600 mb-3">¬øHay un plazo espec√≠fico, no solo "en el futuro"?</p>
        <div class="grid gap-2">
          <div class="flex items-start gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-2">
            <span class="text-green-600 font-bold">‚úì</span>
            <span class="text-green-800 text-sm">"En los primeros 100 d√≠as" o "Durante el cuatrienio 2026-2030"</span>
          </div>
          <div class="flex items-start gap-2 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
            <span class="text-red-600 font-bold">‚úó</span>
            <span class="text-red-800 text-sm">"Gradualmente" o "Cuando sea posible"</span>
          </div>
        </div>
      </div>

      <!-- Dimensi√≥n 3: Mecanismo -->
      <div class="bg-gradient-to-r from-purple-50 to-slate-50 border border-purple-200 rounded-xl p-5">
        <div class="flex items-center gap-3 mb-3">
          <span class="flex items-center justify-center w-10 h-10 bg-purple-100 text-purple-700 rounded-full font-bold text-lg">3</span>
          <div>
            <h4 class="font-bold text-purple-900 text-lg">¬øDice c√≥mo?</h4>
            <span class="text-sm text-purple-600 font-medium">Dimensi√≥n: Mecanismo</span>
          </div>
        </div>
        <p class="text-slate-600 mb-3">¬øExplica el m√©todo, la ley, el programa o los pasos?</p>
        <div class="grid gap-2">
          <div class="flex items-start gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-2">
            <span class="text-green-600 font-bold">‚úì</span>
            <span class="text-green-800 text-sm">"Mediante una reforma a la Ley de Contrataci√≥n P√∫blica"</span>
          </div>
          <div class="flex items-start gap-2 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
            <span class="text-red-600 font-bold">‚úó</span>
            <span class="text-red-800 text-sm">"Implementaremos mejoras"</span>
          </div>
        </div>
      </div>

      <!-- Dimensi√≥n 4: Financiamiento -->
      <div class="bg-gradient-to-r from-emerald-50 to-slate-50 border border-emerald-200 rounded-xl p-5">
        <div class="flex items-center gap-3 mb-3">
          <span class="flex items-center justify-center w-10 h-10 bg-emerald-100 text-emerald-700 rounded-full font-bold text-lg">4</span>
          <div>
            <h4 class="font-bold text-emerald-900 text-lg">¬øDice con qu√© fondos?</h4>
            <span class="text-sm text-emerald-600 font-medium">Dimensi√≥n: Financiamiento</span>
          </div>
        </div>
        <p class="text-slate-600 mb-3">¬øIndica de d√≥nde saldr√° el dinero?</p>
        <div class="grid gap-2">
          <div class="flex items-start gap-2 bg-green-50 border border-green-200 rounded-lg px-3 py-2">
            <span class="text-green-600 font-bold">‚úì</span>
            <span class="text-green-800 text-sm">"Financiado con una reasignaci√≥n del presupuesto del MOPT"</span>
          </div>
          <div class="flex items-start gap-2 bg-red-50 border border-red-200 rounded-lg px-3 py-2">
            <span class="text-red-600 font-bold">‚úó</span>
            <span class="text-red-800 text-sm">"Invertiremos millones" (sin decir de d√≥nde)</span>
          </div>
        </div>
      </div>
    </div>

    <hr />

    <h2 class="text-red-700">‚ö†Ô∏è Penalizaciones por Irresponsabilidad Fiscal</h2>
    
    <p>
      <strong>Costa Rica enfrenta urgencias fiscales reales.</strong> La regla fiscal es lo que mantiene 
      las finanzas del pa√≠s a flote y permite cumplir compromisos con el FMI. Por eso, penalizamos 
      propuestas que comprometen la estabilidad financiera:
    </p>

    <div class="not-prose overflow-x-auto">
      <table class="min-w-full text-sm border border-red-200">
        <thead>
          <tr class="bg-red-50 border-b border-red-200">
            <th class="text-left py-3 px-4">Bandera Roja</th>
            <th class="text-left py-3 px-4">¬øQu√© significa?</th>
            <th class="text-center py-3 px-4">Penalizaci√≥n</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-red-100">
            <td class="py-3 px-4 font-medium">
              <span class="text-lg">‚ö†Ô∏è</span> Ataca regla fiscal
            </td>
            <td class="py-3 px-4 text-slate-600">
              Propone flexibilizar, reformar o eliminar la regla fiscal sin alternativa de sostenibilidad
            </td>
            <td class="py-3 px-4 text-center font-bold text-red-600">-2 puntos</td>
          </tr>
          <tr class="border-b border-red-100">
            <td class="py-3 px-4 font-medium">
              <span class="text-lg">üí∞</span> Propone m√°s deuda
            </td>
            <td class="py-3 px-4 text-slate-600">
              Propone aumentar la deuda p√∫blica sin plan de sostenibilidad o mecanismo de pago
            </td>
            <td class="py-3 px-4 text-center font-bold text-red-600">-1 punto</td>
          </tr>
          <tr>
            <td class="py-3 px-4 font-medium">
              <span class="text-lg">üìà</span> Propone m√°s impuestos
            </td>
            <td class="py-3 px-4 text-slate-600">
              Propone aumentar la carga tributaria al pueblo costarricense
            </td>
            <td class="py-3 px-4 text-center font-bold text-red-600">-1 punto</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="not-prose bg-slate-50 border border-slate-200 rounded-lg p-4 mt-4">
      <h4 class="font-semibold text-slate-900 mb-2">üìä Estad√≠sticas actuales:</h4>
      <ul class="text-sm text-slate-600 space-y-1">
        <li>‚Ä¢ <strong>{fiscalStats.attackFiscalRule}</strong> de {fiscalStats.total} partidos atacan la regla fiscal</li>
        <li>‚Ä¢ <strong>{fiscalStats.proposeDebt}</strong> de {fiscalStats.total} partidos proponen m√°s deuda</li>
        <li>‚Ä¢ <strong>{fiscalStats.proposeTax}</strong> de {fiscalStats.total} partidos proponen m√°s impuestos</li>
        <li class="pt-2">‚Ä¢ üü¢ <strong>{fiscalStats.lowRisk}</strong> partidos con riesgo BAJO</li>
        <li>‚Ä¢ üü† <strong>{fiscalStats.mediumRisk}</strong> partidos con riesgo MEDIO</li>
        <li>‚Ä¢ üî¥ <strong>{fiscalStats.highRisk}</strong> partidos con riesgo ALTO</li>
      </ul>
    </div>

    <hr />

    <h2>Niveles de Riesgo Fiscal</h2>
    
    <div class="not-prose grid gap-3">
      <div class="flex items-start gap-3 p-3 bg-green-50 border border-green-200 rounded-lg">
        <span class="text-2xl">üü¢</span>
        <div>
          <h4 class="font-semibold text-green-800">Riesgo BAJO</h4>
          <p class="text-sm text-green-700">
            El partido NO ataca la regla fiscal, NO propone m√°s deuda ni m√°s impuestos al pueblo.
            Plan fiscalmente responsable.
          </p>
        </div>
      </div>
      
      <div class="flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-lg">
        <span class="text-2xl">üü†</span>
        <div>
          <h4 class="font-semibold text-amber-800">Riesgo MEDIO</h4>
          <p class="text-sm text-amber-700">
            El partido tiene 1-2 banderas rojas fiscales. Puede proponer m√°s deuda O atacar 
            la regla fiscal, pero no ambas.
          </p>
        </div>
      </div>
      
      <div class="flex items-start gap-3 p-3 bg-red-50 border border-red-200 rounded-lg">
        <span class="text-2xl">üî¥</span>
        <div>
          <h4 class="font-semibold text-red-800">Riesgo ALTO</h4>
          <p class="text-sm text-red-700">
            El partido tiene m√∫ltiples banderas rojas fiscales. Propone flexibilizar la regla fiscal 
            Y aumentar deuda Y/O impuestos. Riesgo significativo para las finanzas p√∫blicas.
          </p>
        </div>
      </div>
    </div>

    <hr />

    <h2>¬øC√≥mo se calcula el puntaje?</h2>
    
    <div class="not-prose bg-slate-50 border border-slate-200 rounded-xl p-6 mt-4">
      <div class="flex items-center gap-3 mb-4">
        <span class="text-3xl">üßÆ</span>
        <div>
          <p class="font-semibold text-slate-900">Cada propuesta puede obtener hasta <span class="text-emerald-600">4 puntos</span></p>
          <p class="text-sm text-slate-600">Uno por cada dimensi√≥n cumplida (Existencia, Plazo, Mecanismo, Financiamiento)</p>
        </div>
      </div>
      
      <p class="text-slate-700 mb-4">
        Para cada pilar, tomamos la <strong>mejor propuesta</strong> del candidato en ese tema.
      </p>
      
      <h4 class="font-bold text-slate-800 mb-3">üìê Proceso de c√°lculo:</h4>
      
      <div class="space-y-3">
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-7 h-7 bg-blue-100 text-blue-700 rounded-full font-bold text-sm shrink-0">1</span>
          <p class="text-slate-700">Se calcula el <strong>puntaje bruto (raw)</strong> de cada pilar (0-4)</p>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-7 h-7 bg-red-100 text-red-700 rounded-full font-bold text-sm shrink-0">2</span>
          <p class="text-slate-700"><strong class="text-red-700">Se aplican penalizaciones fiscales</strong> (el puntaje puede bajar)</p>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-7 h-7 bg-purple-100 text-purple-700 rounded-full font-bold text-sm shrink-0">3</span>
          <p class="text-slate-700">Se <strong>normaliza</strong> el puntaje efectivo (0 a 1)</p>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-7 h-7 bg-amber-100 text-amber-700 rounded-full font-bold text-sm shrink-0">4</span>
          <p class="text-slate-700">Se <strong>multiplica por el peso</strong> del pilar</p>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-7 h-7 bg-emerald-100 text-emerald-700 rounded-full font-bold text-sm shrink-0">5</span>
          <p class="text-slate-700">Se <strong>suman todos los pilares</strong> para el puntaje final</p>
        </div>
      </div>
      
      <div class="mt-4 pt-4 border-t border-slate-300 flex items-center gap-2">
        <span class="text-xl">üèÜ</span>
        <p class="font-medium text-slate-800"><strong>M√°ximo posible:</strong> 100% (propuestas perfectas en todos los pilares, sin penalizaciones)</p>
      </div>
    </div>

    <hr />

    <h2>¬øPor qu√© penalizar propuestas fiscales irresponsables?</h2>
    
    <div class="not-prose bg-slate-50 border border-slate-200 rounded-xl p-6 mt-4">
      <h4 class="font-bold text-lg mb-4 flex items-center gap-2 text-slate-800">
        <span>üá®üá∑</span> Costa Rica vive una realidad concreta:
      </h4>
      
      <div class="grid sm:grid-cols-2 gap-3 mb-4">
        <div class="flex items-center gap-3 bg-amber-50 border-2 border-amber-300 rounded-lg px-4 py-3 shadow-sm">
          <span class="text-2xl">üìâ</span>
          <div>
            <p class="font-bold text-amber-900">D√©ficit fiscal</p>
            <p class="text-sm text-amber-700">Requiere control constante</p>
          </div>
        </div>
        <div class="flex items-center gap-3 bg-amber-50 border-2 border-amber-300 rounded-lg px-4 py-3 shadow-sm">
          <span class="text-2xl">üè¶</span>
          <div>
            <p class="font-bold text-amber-900">Compromisos con el FMI</p>
            <p class="text-sm text-amber-700">Que deben cumplirse</p>
          </div>
        </div>
        <div class="flex items-center gap-3 bg-amber-50 border-2 border-amber-300 rounded-lg px-4 py-3 shadow-sm">
          <span class="text-2xl">üìä</span>
          <div>
            <p class="font-bold text-amber-900">Regla fiscal</p>
            <p class="text-sm text-amber-700">√önico mecanismo de contenci√≥n</p>
          </div>
        </div>
        <div class="flex items-center gap-3 bg-amber-50 border-2 border-amber-300 rounded-lg px-4 py-3 shadow-sm">
          <span class="text-2xl">üíµ</span>
          <div>
            <p class="font-bold text-amber-900">Deuda p√∫blica &gt;60% PIB</p>
            <p class="text-sm text-amber-700">Nivel cr√≠tico de endeudamiento</p>
          </div>
        </div>
      </div>
      
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mt-4">
        <p class="text-red-800">
          <strong class="text-red-700">‚ö†Ô∏è Importante:</strong> Proponer flexibilizar la regla fiscal sin alternativa, 
          o aumentar deuda e impuestos sin plan de sostenibilidad, son decisiones que 
          <strong>afectan directamente</strong> al pueblo costarricense.
        </p>
      </div>
      
      <p class="mt-4 text-emerald-700 font-medium">
        ‚úÖ Este an√°lisis premia la <strong class="text-emerald-800">responsabilidad fiscal</strong> y penaliza 
        las propuestas que ponen en riesgo la estabilidad econ√≥mica del pa√≠s.
      </p>
    </div>

    <hr />

    <h2>¬øQu√© NO hace este an√°lisis?</h2>
    
    <div class="not-prose grid sm:grid-cols-2 gap-3 mt-4">
      <div class="flex items-start gap-3 bg-slate-100 border border-slate-200 rounded-lg p-4">
        <span class="text-2xl">‚ùå</span>
        <div>
          <p class="font-semibold text-slate-800">No eval√∫a viabilidad pol√≠tica</p>
          <p class="text-sm text-slate-600">Si es posible aprobar algo en la Asamblea Legislativa</p>
        </div>
      </div>
      <div class="flex items-start gap-3 bg-slate-100 border border-slate-200 rounded-lg p-4">
        <span class="text-2xl">‚ùå</span>
        <div>
          <p class="font-semibold text-slate-800">No juzga ideolog√≠a</p>
          <p class="text-sm text-slate-600">Si algo es "de izquierda" o "de derecha"</p>
        </div>
      </div>
      <div class="flex items-start gap-3 bg-slate-100 border border-slate-200 rounded-lg p-4">
        <span class="text-2xl">‚ùå</span>
        <div>
          <p class="font-semibold text-slate-800">No predice resultados</p>
          <p class="text-sm text-slate-600">Si una propuesta funcionar√° o no en la pr√°ctica</p>
        </div>
      </div>
      <div class="flex items-start gap-3 bg-slate-100 border border-slate-200 rounded-lg p-4">
        <span class="text-2xl">‚ùå</span>
        <div>
          <p class="font-semibold text-slate-800">No recomienda candidatos</p>
          <p class="text-sm text-slate-600">Esa decisi√≥n es tuya como ciudadano</p>
        </div>
      </div>
    </div>

    <hr />

    <h2>Transparencia</h2>
    
    <div class="not-prose bg-emerald-50 border border-emerald-200 rounded-xl p-6 mt-4">
      <div class="grid gap-4">
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-8 h-8 bg-emerald-100 text-emerald-700 rounded-full shrink-0">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </span>
          <div>
            <p class="font-semibold text-emerald-900">PDFs originales disponibles</p>
            <p class="text-sm text-emerald-700">Todos los planes de gobierno est√°n disponibles para descarga en este sitio</p>
          </div>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-8 h-8 bg-emerald-100 text-emerald-700 rounded-full shrink-0">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </span>
          <div>
            <p class="font-semibold text-emerald-900">Enlaces a p√°gina exacta</p>
            <p class="text-sm text-emerald-700">Cada propuesta tiene enlace directo a la p√°gina del documento fuente</p>
          </div>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-8 h-8 bg-emerald-100 text-emerald-700 rounded-full shrink-0">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </span>
          <div>
            <p class="font-semibold text-emerald-900">An√°lisis objetivo</p>
            <p class="text-sm text-emerald-700">Sin sesgos ideol√≥gicos: solo evaluamos qu√© tan completas son las propuestas</p>
          </div>
        </div>
        <div class="flex items-start gap-3">
          <span class="flex items-center justify-center w-8 h-8 bg-emerald-100 text-emerald-700 rounded-full shrink-0">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </span>
          <div>
            <p class="font-semibold text-emerald-900">Sin financiamiento pol√≠tico</p>
            <p class="text-sm text-emerald-700">No recibimos dinero de partidos pol√≠ticos ni candidatos</p>
          </div>
        </div>
      </div>
    </div>

    <p class="text-sm text-slate-500 mt-12">
      <em>√öltima actualizaci√≥n: Enero 2026 ¬∑ Versi√≥n del an√°lisis: v5 (Responsabilidad Fiscal)</em>
    </p>

  </article>
</BaseLayout>

<style>
  .prose h2 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #0f172a;
    margin-top: 3rem;
    margin-bottom: 1rem;
  }
  .prose h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #1e293b;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
  }
  .prose p {
    color: #475569;
    line-height: 1.75;
  }
  .prose ul, .prose ol {
    color: #475569;
  }
  .prose hr {
    margin: 2rem 0;
    border-color: #e2e8f0;
  }
</style>

<script>
  // Datos de fuentes p√∫blicas por pilar - Noticias 2025 de medios costarricenses (m√≠nimo 5 por pilar)
  const sourcesData: Record<string, { title: string; icon: string; sources: { name: string; url: string; description: string }[] }> = {
    seguridad: {
      title: "üõ°Ô∏è Seguridad ciudadana",
      icon: "üõ°Ô∏è",
      sources: [
        {
          name: "Teletica: 2025 rompe r√©cords de muertes violentas",
          url: "https://www.teletica.com/nacional/los-numeros-lo-demuestran-2025-rompe-records-de-muertes-violentas-en-costa-rica_399627",
          description: "Dic 2025: Costa Rica registr√≥ 2,109 muertes violentas, la cifra m√°s alta en 5 a√±os"
        },
        {
          name: "CRHoy: Informe Competitividad alerta p√©rdida en seguridad",
          url: "https://crhoy.com/economia/informe-de-competitividad-alerta-costa-rica-cede-en-salud-y-seguridad/",
          description: "2025: Pa√≠s perdi√≥ 13 puntos en seguridad entre 2021-2025 seg√∫n √çndice Nacional"
        },
        {
          name: "Semanario U: Narcotr√°fico arraiga en territorios rurales",
          url: "https://semanariouniversidad.com/pais/retrocesos-en-salud-ambiental-desarrollo-inmobiliario-agresivo-y-narcotrafico-impactan-defensa-de-territorios/",
          description: "2025: Mayor arraigo del narcotr√°fico en zonas rurales y costeras"
        },
        {
          name: "CRHoy: Percepci√≥n de inseguridad alcanza m√°ximo hist√≥rico",
          url: "https://www.crhoy.com/nacionales/sucesos/",
          description: "May 2025: 43.7% considera seguridad como principal problema del pa√≠s (CIEP)"
        },
        {
          name: "Repretel: Exmagistrado detenido por narcotr√°fico",
          url: "https://www.repretel.com/noticias/",
          description: "Jun 2025: Celso Gamboa detenido a solicitud de la DEA por narcotr√°fico"
        }
      ]
    },
    salud: {
      title: "üè• Salud p√∫blica (CCSS)",
      icon: "üè•",
      sources: [
        {
          name: "CRHoy: Deterioro fiscal golpear√° inversi√≥n social",
          url: "https://crhoy.com/economia/informe-proyecta-que-deterioro-en-recaudacion-fiscal-golpeara-inversion-social/",
          description: "Nov 2025: Informe proyecta impacto negativo en servicios de salud"
        },
        {
          name: "Semanario U: 105,000 trabajadores menos en fuerza laboral",
          url: "https://semanariouniversidad.com/pais/inec-confirma-caida-de-la-fuerza-laboral-en-costa-rica-105-000-trabajadores-menos-que-hace-un-ano/",
          description: "Oct 2025: INEC confirma ca√≠da dram√°tica de la fuerza laboral"
        },
        {
          name: "OPS: Costa Rica lanza planes nacionales de salud 2024-2030",
          url: "https://www.paho.org/es/noticias/7-1-2025-costa-rica-cuenta-con-2-nuevos-planes-para-mejorar-atencion-servicios-salud",
          description: "Ene 2025: Ministerio presenta Plan Nacional de Calidad en Salud"
        },
        {
          name: "OPS: Evaluaci√≥n de capacidades para emergencias sanitarias",
          url: "https://www.paho.org/es/noticias/28-2-2025-costa-rica-evalua-sus-capacidades-para-atender-emergencias",
          description: "Feb 2025: 10+ instituciones eval√∫an respuesta ante emergencias de salud"
        },
        {
          name: "CRHoy: 1.5 millones de infecciones respiratorias en 2025",
          url: "https://www.crhoy.com/nacionales/",
          description: "Dic 2025: Crisis por virus respiratorios con 39 muertes infantiles"
        }
      ]
    },
    fiscal: {
      title: "üí∞ Sostenibilidad fiscal",
      icon: "üí∞",
      sources: [
        {
          name: "CRHoy: D√©ficit alcanz√≥ 3.22% del PIB",
          url: "https://www.crhoy.com/economia/deficit-fiscal-crecio-en-noviembre-alcanzo-322-del-pib/",
          description: "Ene 2025: D√©ficit fiscal creci√≥ en noviembre 2024"
        },
        {
          name: "Semanario U: Deuda en 57.4% del PIB",
          url: "https://semanariouniversidad.com/pais/deuda-de-costa-rica-se-ubico-en-un-574-del-pib-para-marzo-de-2025/",
          description: "May 2025: Deuda p√∫blica se acerca al l√≠mite del 60%"
        },
        {
          name: "CRHoy: Hacienda fija regla fiscal en 5.81% para 2026",
          url: "https://crhoy.com/economia/hacienda-fija-regla-fiscal-en-581-para-2026/",
          description: "Sep 2025: Ministerio establece l√≠mite de crecimiento del gasto"
        },
        {
          name: "Semanario U: Recaudaci√≥n pierde dinamismo",
          url: "https://semanariouniversidad.com/pais/recaudacion-de-impuestos-pierde-dinamismo-ingresos-por-iva-crecerian-39-y-renta-08-en-2025/",
          description: "Sep 2025: IVA crecer√≠a solo 3.9% y Renta 0.8%"
        },
        {
          name: "CRHoy: 93% del presupuesto 2026 comprometido",
          url: "https://www.crhoy.com/93-del-presupuesto-ordinario-para-2026-esta-totalmente-comprometido/",
          description: "Sep 2025: Solo 7% del presupuesto tiene margen de maniobra"
        }
      ]
    },
    estado: {
      title: "‚öñÔ∏è Reforma del Estado",
      icon: "‚öñÔ∏è",
      sources: [
        {
          name: "Semanario U: Contralor√≠a alerta sobreestimaciones ‚Ç°21,000M",
          url: "https://semanariouniversidad.com/pais/contraloria-alerta-sobreestimaciones-del-ministerio-de-hacienda-por-%C2%A221-000-millones-en-presupuesto-2025/",
          description: "Feb 2025: Contralor√≠a detecta irregularidades en presupuesto"
        },
        {
          name: "CRHoy: 93% del presupuesto 2026 est√° comprometido",
          url: "https://www.crhoy.com/93-del-presupuesto-ordinario-para-2026-esta-totalmente-comprometido/",
          description: "Sep 2025: Rigidez presupuestaria limita acciones del Estado"
        },
        {
          name: "Repretel: Juicio caso Bancr√©dito a expresidente Sol√≠s",
          url: "https://www.repretel.com/noticia/ordenan-apertura-de-juicio-contra-expresidente-luis-guillermo-solis/",
          description: "2025: Ordenan juicio por presunto delito contra Hacienda P√∫blica"
        },
        {
          name: "Semanario U: Hacienda resalt√≥ manejo de deuda 2024",
          url: "https://semanariouniversidad.com/pais/hacienda-resalto-manejo-de-deuda-como-punto-alto-de-responsabilidad-fiscal-en-2024-pese-a-criticas-de-diputados-por-el-costo-social/",
          description: "Mar 2025: Diputados critican costo social del manejo fiscal"
        },
        {
          name: "CRHoy: Crecimiento de ingresos del Gobierno se reduce",
          url: "https://crhoy.com/economia/crecimiento-de-los-ingresos-del-gobierno-siguen-reduciendose-senala-informe-de-la-una/",
          description: "Nov 2025: Informe UNA se√±ala deterioro en ingresos estatales"
        }
      ]
    },
    empleo: {
      title: "üíº Empleo e IED",
      icon: "üíº",
      sources: [
        {
          name: "Trivisi√≥n: CR proyecta crecimiento de 4.1% en 2025",
          url: "https://trivisioncr.com/noticias-de-economia/costa-rica-proyecta-un-crecimiento-del-41-en-2025/",
          description: "Ene 2025: Banco Central proyecta crecimiento impulsado por exportaciones"
        },
        {
          name: "CRHoy: Desempleo juvenil triplica promedio nacional",
          url: "https://www.crhoy.com/desempleo-juvenil-triplica-el-promedio-nacional-y-afecta-mas-a-las-mujeres/",
          description: "Sep 2025: Mujeres j√≥venes las m√°s afectadas por desempleo"
        },
        {
          name: "Semanario U: 73.1% cree que desempleo aumentar√°",
          url: "https://semanariouniversidad.com/pais/el-731-de-las-personas-piensan-que-habra-igual-o-mayor-desempleo-el-proximo-ano/",
          description: "Jun 2025: Encuesta UCR revela pesimismo sobre empleo futuro"
        },
        {
          name: "CRHoy: 177 mil personas buscaban trabajo en febrero",
          url: "https://www.crhoy.com/economia/desempleo-se-acelera-177-mil-personas-buscaban-trabajo-en-febrero/",
          description: "Abr 2025: Desempleo se acelera en primer trimestre"
        },
        {
          name: "CRHoy: OCDE proyecta crecimiento 3.8% pero con riesgos",
          url: "https://www.crhoy.com/economia/ocde-estima-que-economia-costarricense-tendra-un-crecimiento-solido-en-2025-pero-senala-riesgos/",
          description: "Dic 2025: OCDE advierte sobre vulnerabilidades econ√≥micas"
        }
      ]
    },
    educacion: {
      title: "üìö Educaci√≥n",
      icon: "üìö",
      sources: [
        {
          name: "Repretel: Educaci√≥n registra mayor recorte en 10 a√±os",
          url: "https://www.repretel.com/noticia/educacion-publica-de-costa-rica-registra-el-recorte-en-el-presupuesto-mas-alto-de-los-ultimos-10-anos/",
          description: "2025: Presupuesto educativo pas√≥ de 7.1% a 4.8% del PIB"
        },
        {
          name: "Repretel: Hacienda: 8% obliga cerrar 19 instituciones",
          url: "https://www.repretel.com/noticia/hacienda-dice-que-cumplir-con-el-8-en-educacion-publica-obligaria-a-cerrar-19-instituciones/",
          description: "2025: Imposibilidad de cumplir mandato constitucional del 8%"
        },
        {
          name: "Trivisi√≥n: CONARE define FEES 2026 con equidad",
          url: "https://trivisioncr.com/noticias-de-educacion/conare-define-distribucion-del-fees-2026-con-criterios-de-equidad/",
          description: "Sep 2025: Consejo de Rectores aprueba distribuci√≥n universitaria"
        },
        {
          name: "Semanario U: Mayor reducci√≥n educativa en 40 a√±os",
          url: "https://semanariouniversidad.com/pais/costa-rica-enfrenta-la-mayor-reduccion-en-inversion-educativa-de-los-ultimos-40-anos/",
          description: "2025: Crisis hist√≥rica en inversi√≥n educativa"
        },
        {
          name: "Repretel: Estudiantes denuncian deficiencias",
          url: "https://www.repretel.com/noticia/estudiantes-de-canas-y-upala-alzan-la-voz-por-deficiencias-en-infraestructura-educativa/",
          description: "2025: Estudiantes viajan 200km para denunciar infraestructura"
        }
      ]
    },
    infraestructura: {
      title: "üèóÔ∏è Infraestructura",
      icon: "üèóÔ∏è",
      sources: [
        {
          name: "Semanario U: Inversi√≥n p√∫blica la m√°s baja de la d√©cada",
          url: "https://semanariouniversidad.com/pais/inversion-publica-cayo-a-sus-niveles-mas-bajos-de-la-decada-durante-gobierno-de-rodrigo-chaves/",
          description: "Ene 2025: Inversi√≥n p√∫blica cay√≥ a niveles hist√≥ricos bajos"
        },
        {
          name: "Semanario U: Baja inversi√≥n genera descomposici√≥n social",
          url: "https://semanariouniversidad.com/pais/expertos-sostienen-que-baja-inversion-publica-genera-descomposicion-social/",
          description: "Abr 2025: Expertos CINPE advierten sobre impacto social"
        },
        {
          name: "CRHoy: Chaves cierra tercer a√±o con d√©ficit",
          url: "https://www.crhoy.com/nacionales/chaves-cierra-tercer-ano-con-deficit-arroz-mas-caro-y-sin-tocar-pensiones-de-lujo/",
          description: "Nov 2025: Balance del tercer a√±o de gobierno"
        },
        {
          name: "Trivisi√≥n: Presidente presenta tercer informe de labores",
          url: "https://trivisioncr.com/noticias-de-politica/presidente-rodrigo-chaves-presenta-su-tercer-informe-de-labores/",
          description: "May 2025: Informe destaca logros en infraestructura y econom√≠a"
        },
        {
          name: "Semanario U: Deuda p√∫blica creci√≥ 8% en gobierno Chaves",
          url: "https://semanariouniversidad.com/pais/deuda-publica-crecio-8-durante-gobierno-de-rodrigo-chaves/",
          description: "Dic 2025: An√°lisis del crecimiento de la deuda p√∫blica"
        }
      ]
    },
    social: {
      title: "ü§ù Pol√≠tica social",
      icon: "ü§ù",
      sources: [
        {
          name: "Semanario U: Pa√≠s requiere 8.5% del PIB pero asigna 5%",
          url: "https://semanariouniversidad.com/pais/pais-requiere-de-un-85-del-pib-para-atender-principales-rezagos-del-sistema-educativo-pero-apenas-asigna-un-5/",
          description: "2025: Brecha entre necesidad y asignaci√≥n presupuestaria"
        },
        {
          name: "CRHoy: 177 mil personas buscaban trabajo en febrero",
          url: "https://www.crhoy.com/economia/desempleo-se-acelera-177-mil-personas-buscaban-trabajo-en-febrero/",
          description: "Abr 2025: Desempleo se acelera afectando familias"
        },
        {
          name: "Repretel: Estudiantes de Ca√±as denuncian deficiencias",
          url: "https://www.repretel.com/noticia/estudiantes-de-canas-y-upala-alzan-la-voz-por-deficiencias-en-infraestructura-educativa/",
          description: "2025: Comunidades rurales sin acceso a educaci√≥n digna"
        },
        {
          name: "CRHoy: Deterioro fiscal golpear√° inversi√≥n social",
          url: "https://crhoy.com/economia/informe-proyecta-que-deterioro-en-recaudacion-fiscal-golpeara-inversion-social/",
          description: "Nov 2025: Recortes afectar√°n programas sociales"
        },
        {
          name: "Semanario U: 40.8% prev√© aumento de desempleo",
          url: "https://semanariouniversidad.com/pais/408-de-consumidores-preve-que-el-desempleo-podria-aumentar-en-proximos-12-meses/",
          description: "Sep 2025: Percepci√≥n negativa sobre futuro laboral"
        }
      ]
    },
    ambiente: {
      title: "üåø Ambiente",
      icon: "üåø",
      sources: [
        {
          name: "CRHoy: 15 d√≠as de calor peligroso en 3 meses",
          url: "https://crhoy.com/ciencia/en-3-meses-costa-rica-experimento-15-dias-de-calor-peligroso-por-el-cambio-climatico/",
          description: "Ago 2025: Calor extremo por cambio clim√°tico afecta poblaci√≥n"
        },
        {
          name: "Semanario U: Retrocesos en salud ambiental",
          url: "https://semanariouniversidad.com/pais/retrocesos-en-salud-ambiental-desarrollo-inmobiliario-agresivo-y-narcotrafico-impactan-defensa-de-territorios/",
          description: "2025: Desarrollo inmobiliario agresivo impacta territorios"
        },
        {
          name: "UCR: Estado de la Naci√≥n alerta retroceso ambiental",
          url: "https://bienescomunes.fcs.ucr.ac.cr/costa-rica-retrocede-en-gestion-ambiental-decisiones-gubernamentales-erosionan-los-bienes-comunes-estado-de-la-nacion-2025/",
          description: "Nov 2025: Debilitamiento de protecci√≥n a ecosistemas"
        },
        {
          name: "Semanario U: Traslado de nitrato de amonio desde Panam√°",
          url: "https://semanariouniversidad.com/pais/transportan-a-costa-rica-2-000-toneladas-del-peligroso-material-nitrato-de-amonio-desde-mina-clausurada-en-panama/",
          description: "Ene 2025: 2,000 toneladas de material peligroso genera alarma"
        },
        {
          name: "OPS: Costa Rica sede de reuni√≥n sobre enfermedades arbovirales",
          url: "https://www.paho.org/es/noticias/6-5-2025-costa-rica-fue-sede-primera-reunion-regional-redes-nacionales-expertos-clinicos",
          description: "May 2025: Expertos regionales discuten dengue, zika y chikungu√±a"
        }
      ]
    },
    exterior: {
      title: "üåé Pol√≠tica exterior",
      icon: "üåé",
      sources: [
        {
          name: "CRHoy: OCDE estima crecimiento s√≥lido pero con riesgos",
          url: "https://www.crhoy.com/economia/ocde-estima-que-economia-costarricense-tendra-un-crecimiento-solido-en-2025-pero-senala-riesgos/",
          description: "Dic 2025: OCDE proyecta 3.8% crecimiento con advertencias"
        },
        {
          name: "Semanario U: Econom√≠a crecer√≠a 3.5% al cierre de 2025",
          url: "https://semanariouniversidad.com/pais/economia-creceria-35-al-cerrar-el-2025-segun-proyecciones-de-mercado-de-valores/",
          description: "Jul 2025: Proyecciones de mercado de valores"
        },
        {
          name: "OPS: Costa Rica lidera ejercicios de preparaci√≥n regional",
          url: "https://www.paho.org/es/noticias/6-5-2025-mas-fuertes-preparados-resilientes-costa-rica-lidera-participa-ejercicios",
          description: "May 2025: Liderazgo en cooperaci√≥n regional de emergencias"
        },
        {
          name: "Trivisi√≥n: Hacienda destaca 17,250 nuevos contribuyentes",
          url: "https://trivisioncr.com/noticias-de-economia/hacienda-destaca-logros-tributarios-con-17250-nuevos-contribuyentes/",
          description: "Dic 2024: Regularizaci√≥n tributaria de contribuyentes"
        },
        {
          name: "OPS: Tratado Global sobre Pl√°sticos",
          url: "https://semanariouniversidad.com/opinion/la-salud-en-el-corazon-del-tratado-global-sobre-plasticos/",
          description: "Oct 2025: CR participa activamente en negociaciones internacionales"
        }
      ]
    }
  };

  // Modal logic
  const modal = document.getElementById('sources-modal');
  const modalTitle = document.getElementById('modal-title');
  const modalContent = document.getElementById('modal-content');
  const closeBtn = document.getElementById('close-modal');
  const sourceBtns = document.querySelectorAll('.source-btn');

  function openModal(pillar: string) {
    const data = sourcesData[pillar];
    if (!data || !modal || !modalTitle || !modalContent) return;

    modalTitle.textContent = `${data.icon} Fuentes: ${data.title.replace(data.icon, '').trim()}`;
    
    modalContent.innerHTML = `
      <div class="space-y-3">
        ${data.sources.map((source, index) => `
          <a href="${source.url}" target="_blank" rel="noopener noreferrer" 
             class="block p-4 bg-slate-50 hover:bg-blue-50 border border-slate-200 hover:border-blue-300 rounded-xl transition-all group">
            <div class="flex items-start gap-3">
              <span class="flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-700 rounded-full font-bold text-sm shrink-0">
                ${index + 1}
              </span>
              <div class="flex-1 min-w-0">
                <p class="font-semibold text-slate-900 group-hover:text-blue-700 transition-colors">
                  ${source.name}
                  <svg class="inline w-4 h-4 ml-1 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                  </svg>
                </p>
                <p class="text-sm text-slate-600 mt-1">${source.description}</p>
                <p class="text-xs text-blue-600 mt-2 truncate">${source.url}</p>
              </div>
            </div>
          </a>
        `).join('')}
      </div>
    `;

    modal.classList.remove('hidden');
    modal.classList.add('flex');
  }

  function closeModal() {
    if (!modal) return;
    modal.classList.add('hidden');
    modal.classList.remove('flex');
  }

  // Event listeners
  sourceBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const pillar = (btn as HTMLElement).dataset.pillar;
      if (pillar) openModal(pillar);
    });
  });

  closeBtn?.addEventListener('click', closeModal);
  
  modal?.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });
</script>
